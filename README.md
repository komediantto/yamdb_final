![example workflow](https://github.com/komediantto/yamdb_final/actions/workflows/main.yml/badge.svg)

# YaMDb (REST API) - база отзывов о фильмах, книгах и музыке.

Проект YaMDb собирает отзывы (Review) пользователей на произведения (Title). Произведения делятся на категории: «Книги», «Фильмы», «Музыка». Список категорий (Category) может быть расширен (например, можно добавить категорию «Изобразительное искусство» или «Ювелирка»).
Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку.
В каждой категории есть произведения: книги, фильмы или музыка. Например, в категории «Книги» могут быть произведения «Винни Пух и все-все-все» и «Марсианские хроники», а в категории «Музыка» — песня «Давеча» группы «Насекомые» и вторая сюита Баха. Произведению может быть присвоен жанр из списка предустановленных (например, «Сказка», «Рок» или «Артхаус»). Новые жанры может создавать только администратор.
Благодарные или возмущённые читатели оставляют к произведениям текстовые отзывы (Review) и выставляют произведению рейтинг (оценку в диапазоне от одного до десяти). Из множества оценок автоматически высчитывается средняя оценка произведения.
 
## Создание суперпользователя

Для создания суперпользователя необходимо (от имени суперпользователя):

```
docker exec -it <CONTAINER ID> bash
```
где <CONTAINER ID> - ID "api_yamdb-web-1"


внутри контейнера создаем пользователя:

```
python manage.py createsuperuser
```


## Команды для запуска приложения

Для запуска проекта выполните команду от имени суперпользователя:

```
docker-compose up
```

В результате выполнения команды у вас развернётся проект, запущенный через gunicorn с базой данных postgres.
Создадутся три контейнера. api_yamdb-web-1, api_yamdb-db-1 и api_yamdb-nginx-1.

Посмотреть список запущенных контейнеров (от имени суперпользователя):

```
docker container ls
```

Запустить контейнер (от имени суперпользователя):

```
docker container start <CONTAINER ID>
```

Остановить контейнер (от имени суперпользователя):

```
docker container stop <CONTAINER ID>
```

## Заполнение базы начальными данными

Скопируем fixtures.json в контейнер api_yamdb-web-1:

```
sudo docker cp /api_yamdb/fixtures.json <ID api_yamdb-web-1>:/code/ 
```

Заходим в контейнер:

```
docker exec -it <CONTAINER ID> bash
```
где <CONTAINER ID> - ID "api_yamdb-web-1"


Выполняем команды:

```
python3 manage.py shell  
# выполнить в открывшемся терминале:
>>> from django.contrib.contenttypes.models import ContentType
>>> ContentType.objects.all().delete()
>>> quit()

python manage.py loaddata fixtures.json 
```

Готово.

## Документация API

Документация к непосредственно API расположена по адресу

```
http://localhost/redoc/
```


